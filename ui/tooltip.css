/* ===== Google Sheets-safe: Grayscale Tooltip ===== */

:root{
  --tz-bg-dark: #0b0b0b;
  --tz-bg-light: #ffffff;
  --tz-text-dark: #ffffff;
  --tz-text-light: #000000;
  --tz-muted: #9e9e9e;
  --tz-radius: 10px;
  --tz-shadow-strong: 0 14px 40px rgba(0,0,0,0.6);
}

/* Main container */
.tz-converter-tooltip {
  position: fixed !important;
  z-index: 2147483648 !important;
  display: block;
  visibility: hidden; /* use visibility to avoid compositing issues */
  box-sizing: border-box;
  margin: 0;
  padding: 14px 18px;
  min-width: 260px;
  max-width: 380px;
  border-radius: var(--tz-radius);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  font-size: 14px;
  line-height: 1.4;
  pointer-events: auto;
  user-select: text;
  isolation: isolate;
  contain: layout style paint;
  transform-origin: center center;
  will-change: transform;
  transform: translateY(-6px) scale(.995);
  transition: transform .18s ease-out, visibility 0s linear .18s;
  box-shadow: var(--tz-shadow-strong);
  border: 1px solid transparent;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--tz-bg-dark); /* fully opaque */
  color: var(--tz-text-dark);
}

/* Visible state */
.tz-converter-tooltip.visible {
  visibility: visible;
  transition-delay: 0s;
  transform: translateY(0) scale(1);
}

/* Noninteractive mode */
.tz-converter-tooltip.noninteractive { pointer-events: none; user-select: none; }

/* Header & content */
.tooltip-header { font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.7px; margin-bottom: 10px; opacity: 0.95; color: inherit; }
.tooltip-main { margin-bottom: 8px; }
.converted-time { font-size: 18px; font-weight: 700; line-height: 1.3; display:flex; align-items:center; gap:8px; flex-wrap:wrap; }

/* timezone text: pure white, no gray badge */
.timezone-badge, .tz-timezone-code {
  background: transparent !important;
  color: #ffffff !important;
  border: none !important;
  box-shadow: none !important;
  padding: 0 !important;
  font-weight: 700;
  font-size: 11px;
  display: inline-block;
  vertical-align: middle;
  white-space: nowrap;
}

/* small secondary label (kept white) */
.timezone-badge.secondary { font-size: 10px; padding: 0 6px !important; color: #ffffff !important; }

/* remove blur/transparency */
.timezone-badge, .timezone-badge.secondary { backdrop-filter: none !important; opacity: 1 !important; }

/* Source / inferred */
.tooltip-source, .tooltip-inferred {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid rgba(255,255,255,0.06);
  font-size: 13px;
  color: var(--tz-muted);
  display: flex;
  gap: 6px;
  align-items: center;
  flex-wrap: wrap;
}
.inferred-label { font-weight: 700; margin-bottom: 6px; color: var(--tz-muted); display:flex; gap:6px; align-items:center; }
.inferred-list { list-style: none; padding: 0; margin: 0; opacity: 0.95; }
.inferred-list li { padding-left: 16px; position: relative; margin-bottom: 4px; }
.inferred-list li:before { content: 'â€¢'; position: absolute; left: 4px; color: rgba(255,255,255,0.85); }

/* Focus */
.tz-converter-tooltip[tabindex="0"]:focus { outline: 3px solid rgba(255,255,255,0.92); outline-offset: 3px; }

/* Responsive */
@media (max-width: 480px) {
  .tz-converter-tooltip { max-width: calc(100vw - 40px); font-size: 13px; }
  .converted-time { font-size: 16px; }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .tz-converter-tooltip { transition: none; transform: none !important; }
}

/* Light theme override */
.tz-theme-light .tz-converter-tooltip {
  background-color: var(--tz-bg-light);
  color: var(--tz-text-light);
  box-shadow: 0 10px 30px rgba(0,0,0,0.08);
  border-color: rgba(0,0,0,0.06);
}
.tz-theme-light .tz-converter-tooltip[tabindex="0"]:focus { outline: 3px solid rgba(0,0,0,0.92); }

/* Defensive: avoid inherited transparency on children */
.tz-converter-tooltip, .tz-converter-tooltip * {
  background-image: none;
  background-repeat: no-repeat;
  background-attachment: scroll;
  background-clip: padding-box;
}